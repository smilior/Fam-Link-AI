# コネクト・ファミリー・ハブ (Fam-Link-AI) デザイン要件定義書

> **プロジェクト名:** コネクト・ファミリー・ハブ (Fam-Link-AI)
> **作成日:** 2026-02-21
> **ステータス:** ドラフト
> **対象読者:** AI Agent（実装担当）
> **関連ドキュメント:** [機能要件定義書](./requirements.md) / [企画書](./proposal.md)

---

## 目次

1. [デザインシステム基盤](#1-デザインシステム基盤)
   - 1.1 [カラーパレット](#11-カラーパレット)
   - 1.2 [タイポグラフィ](#12-タイポグラフィ)
   - 1.3 [スペーシング & グリッド](#13-スペーシング--グリッド)
   - 1.4 [ボーダーラジウス・シャドウ・アイコン](#14-ボーダーラジウスシャドウアイコン)
2. [コンポーネント設計規格](#2-コンポーネント設計規格)
   - 2.1 [ナビゲーション](#21-ナビゲーション)
   - 2.2 [カード](#22-カード)
   - 2.3 [ボタン](#23-ボタン)
   - 2.4 [フォーム](#24-フォーム)
   - 2.5 [カレンダー](#25-カレンダー)
   - 2.6 [メンバーアバター](#26-メンバーアバター)
   - 2.7 [バッジ & スタンプ](#27-バッジ--スタンプ)
   - 2.8 [状態表示（ローディング・エンプティ）](#28-状態表示ローディングエンプティ)
   - 2.9 [トースト通知](#29-トースト通知)
3. [画面別デザイン方針（全13画面）](#3-画面別デザイン方針全13画面)
4. [アニメーション & マイクロインタラクション](#4-アニメーション--マイクロインタラクション)
5. [ダークモード戦略](#5-ダークモード戦略)
6. [アクセシビリティ](#6-アクセシビリティ)
7. [モバイル / PWA 考慮](#7-モバイル--pwa-考慮)
8. [Tailwind カスタム設定 & コンポーネント構成案](#8-tailwind-カスタム設定--コンポーネント構成案)
9. [要件トレーサビリティ](#9-要件トレーサビリティ)

---

## 1. デザインシステム基盤

### 1.1 カラーパレット

#### メンバーカラー

各メンバーに割り当てられた固定カラー。`requirements.md` セクション 3.3 で定義済みの HEX コードに準拠する。

| メンバー | カラー名 | 50 | 100 | 200 | 400 | 500 (基準) | 600 | 700 |
|---------|---------|-----|-----|-----|-----|:---:|-----|-----|
| パパ | Blue (papa) | `#EFF6FF` | `#DBEAFE` | `#BFDBFE` | `#60A5FA` | `#3B82F6` | `#2563EB` | `#1D4ED8` |
| ママ | Pink (mama) | `#FDF2F8` | `#FCE7F3` | `#FBCFE8` | `#F472B6` | `#EC4899` | `#DB2777` | `#BE185D` |
| 娘 | Yellow (daughter) | `#FEFCE8` | `#FEF9C3` | `#FEF08A` | `#FACC15` | `#EAB308` | `#CA8A04` | `#A16207` |
| 息子 | Green (son) | `#F0FDF4` | `#DCFCE7` | `#BBF7D0` | `#4ADE80` | `#22C55E` | `#16A34A` | `#15803D` |

**重要ルール — メンバーカラーの使い方:**

- メンバーカラーは**背景色としてベタ塗りしない**。アクセント要素として使用する:
  - カレンダー上のイベントピル（バー）
  - カードの左ボーダー（`border-l-4`）
  - ラベル・バッジの背景（50系の淡い色のみ）
  - アバターの背景色
- テキストにメンバーカラーを使用する場合は **600 / 700** を使用し、白背景上でのコントラスト比 **4.5:1 以上** を確保する
- ダークモード時は 500 → 400 に切り替える（[セクション 5](#5-ダークモード戦略) 参照）

#### カレンダーイベントピル カラー仕様

月間カレンダー上のイベントは、メンバーカラーを使った**ピル（バー）**で表示する。通常イベントと重要イベントで配色を切り替える。

| メンバー | 通常 (背景) | 通常 (テキスト) | 重要 (背景) | 重要 (テキスト) |
|---------|:---:|:---:|:---:|:---:|
| パパ | `#DBEAFE` (100) | `#1D4ED8` (700) | `#2563EB` (600) | `#FFFFFF` |
| ママ | `#FCE7F3` (100) | `#BE185D` (700) | `#DB2777` (600) | `#FFFFFF` |
| 娘 | `#FEF9C3` (100) | `#A16207` (700) | `#CA8A04` (600) | `#FFFFFF` |
| 息子 | `#DCFCE7` (100) | `#15803D` (700) | `#16A34A` (600) | `#FFFFFF` |
| 家族全体 | `#E0E7FF` (brand-100) | `#4338CA` (brand-700) | `#4F46E5` (brand-600) | `#FFFFFF` |
| 祝日 | `#EF4444` (red-500) | `#FFFFFF` | `#DC2626` (red-600) | `#FFFFFF` |

> **ルール:** 通常イベントは member-100 背景 + member-700 テキスト（淡い背景に濃いテキスト）。重要イベントは member-600 背景 + 白テキスト（濃い背景に白抜き）。

#### ブランドカラー

アプリ全体の Primary アクション色として Indigo を使用する。

| 用途 | カラー | HEX |
|-----|-------|-----|
| Primary | Indigo-500 | `#6366F1` |
| Primary Hover | Indigo-600 | `#4F46E5` |
| Primary Active | Indigo-700 | `#4338CA` |
| Primary Light (背景) | Indigo-50 | `#EEF2FF` |
| Primary 100 | Indigo-100 | `#E0E7FF` |

#### セマンティックカラー

| トークン名 | ライトモード | ダークモード | 用途 |
|-----------|------------|------------|------|
| `background` | Slate-50 `#F8FAFC` | Slate-900 `#0F172A` | ページ背景 |
| `surface` | White `#FFFFFF` | Slate-800 `#1E293B` | カード・モーダル |
| `surface-elevated` | White `#FFFFFF` | Slate-700 `#334155` | 浮き上がった要素 |
| `text-primary` | Slate-900 `#0F172A` | Slate-100 `#F1F5F9` | 見出し・本文 |
| `text-secondary` | Slate-500 `#64748B` | Slate-400 `#94A3B8` | 補助テキスト |
| `text-tertiary` | Slate-400 `#94A3B8` | Slate-500 `#64748B` | 最も薄いテキスト |
| `border` | Slate-200 `#E2E8F0` | Slate-700 `#334155` | ボーダー・区切り線 |
| `success` | Green-500 `#22C55E` | Green-400 `#4ADE80` | 成功・完了 |
| `warning` | Amber-500 `#F59E0B` | Amber-400 `#FBBF24` | 注意・期限 |
| `error` | Red-500 `#EF4444` | Red-400 `#F87171` | エラー・削除 |
| `info` | Blue-500 `#3B82F6` | Blue-400 `#60A5FA` | 情報・ヒント |

---

### 1.2 タイポグラフィ

#### フォントファミリー

| 用途 | フォント | ウェイト | 読み込み方法 |
|-----|---------|---------|------------|
| 見出し・本文 | Noto Sans JP | 400 (Regular), 500 (Medium), 700 (Bold) | `next/font/google` |
| 数値・時刻 | Inter | 400 (Regular), 500 (Medium), 600 (SemiBold) | `next/font/google` with `font-feature-settings: 'tnum'` |

Inter は **Tabular Numbers** を有効にし、時刻やカレンダーの数字が均等幅で整列するようにする。

#### フォントサイズスケール

| トークン名 | サイズ | 行間 | 用途 |
|-----------|:---:|:---:|------|
| `text-2xl` | 24px | 32px | ページタイトル（H1） |
| `text-xl` | 20px | 28px | セクション見出し（H2） |
| `text-lg` | 18px | 28px | カード見出し（H3） |
| `text-base` | 16px | 24px | 本文・ボタンテキスト |
| `text-sm` | 14px | 20px | 補助テキスト・ラベル（**最小サイズ**） |

> **NFR-006 準拠:** フォントサイズの最小値は 14px とする。12px 以下のテキストはアプリ内で使用しない。

---

### 1.3 スペーシング & グリッド

#### スペーシング

4px ベースの Tailwind 標準スペーシングスケールを使用する。

| Tailwind クラス | 値 | 主な用途 |
|----------------|:---:|---------|
| `p-1` / `gap-1` | 4px | アイコンとテキストの間隔 |
| `p-2` / `gap-2` | 8px | コンパクトな内部余白 |
| `p-3` / `gap-3` | 12px | リストアイテム間 |
| `p-4` / `gap-4` | 16px | カード内部余白 |
| `p-5` / `gap-5` | 20px | ページ左右パディング（モバイル） |
| `p-6` / `gap-6` | 24px | セクション間余白 |
| `p-8` / `gap-8` | 32px | 大きなセクション間余白 |

#### レスポンシブレイアウト

| ブレイクポイント | レイアウト | コンテナ | ページ余白 |
|:---:|---------|---------|---------|
| ~ 767px (モバイル) | シングルカラム | 全幅 | `px-5` (20px) |
| 768px ~ 1023px (タブレット) | シングルカラム | `max-w-3xl` (768px) + `mx-auto` | `px-6` (24px) |
| 1024px ~ (デスクトップ) | サイドバー + メインコンテンツ | `max-w-5xl` (1024px) + `mx-auto` | `px-8` (32px) |

#### カレンダーグリッド

```css
/* 月間カレンダー — ウィークロー方式 */
#cal-body {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
  min-height: 0;
}

.week-row {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
  cursor: pointer;
  border-bottom: 1px solid var(--border); /* slate-200 / slate-700 */
  /* 列区切り線を background-image で描画 */
  background-size: calc(100% / 7) 100%;
  background-image: linear-gradient(
    to right,
    transparent calc(100% - 1px),
    var(--border) 1px
  );
}

/* 日付番号行（7列グリッド） */
.week-nums {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  flex-shrink: 0;
}

/* イベントトラック行（7列グリッド、grid-column: span N で複数日スパン） */
.ev-track {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  flex-shrink: 0;
}

/* イベントピル */
.ev-bar {
  font-size: 10.5px;
  line-height: 1.45;
  font-weight: 500;
  padding: 0 3px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  border-radius: 3px;
  margin: 0 1px 1px 1px;
  cursor: pointer;
}

/* 複数日スパンのピル — 始端・中間・終端で角丸を変更 */
.ev-bar.sp-s { border-radius: 3px 0 0 3px; margin-right: 0; }
.ev-bar.sp-m { border-radius: 0; margin-left: 0; margin-right: 0; font-size: 0; }
.ev-bar.sp-e { border-radius: 0 3px 3px 0; margin-left: 0; font-size: 0; }

/* 週間タイムライン */
.timeline-grid {
  display: grid;
  grid-template-columns: 48px repeat(7, 1fr); /* 時刻列 + 7日 */
  grid-template-rows: repeat(24, 60px);        /* 1時間 = 60px */
}
```

> **ウィークロー方式のポイント:**
> - 各週が 1 つの `flex: 1` 行となり、カレンダー全体の高さを均等に分割する
> - イベントピルは `grid-column: span N` で複数日に跨る表示が可能
> - セル区切り線は `background-image` で描画し、DOM 要素を増やさない
> - `gap: 1px` のセルグリッドではなく、ウィークロー内にグリッドをネストする構成

---

### 1.4 ボーダーラジウス・シャドウ・アイコン

#### ボーダーラジウス

| Tailwind クラス | 値 | 用途 |
|----------------|:---:|------|
| `rounded-lg` | 12px | **デフォルト** — カード、モーダル、画像 |
| `rounded-md` | 8px | ボタン、入力フィールド |
| `rounded-full` | 9999px | アバター、バッジ、ドット |

家族向けアプリとして**角丸を大きめに取り、親しみやすさ**を演出する。

#### シャドウ

| モード | 手法 | Tailwind クラス |
|-------|------|----------------|
| ライトモード | ドロップシャドウ | `shadow-md` (`0 4px 6px -1px rgb(0 0 0 / 0.1)`) |
| ダークモード | ボーダーに切替 | `border border-slate-700` |

ライトモードではシャドウで浮遊感を表現し、ダークモードではシャドウが視認しにくいためボーダーに切り替える。

#### アイコン

| 項目 | 値 |
|-----|---|
| ライブラリ | **Lucide React** (`lucide-react`) |
| サイズ | 24px (デフォルト) / 20px (小) / 32px (大) |
| ストローク | 2px (デフォルト) |
| ViewBox | 24x24 |

Lucide React は tree-shakable であり、バンドルサイズへの影響を最小限に抑える。

**主要アイコンマッピング:**

| 用途 | アイコン名 |
|-----|---------|
| カレンダー | `Calendar` |
| 通知 | `Bell` |
| スキャン | `ScanLine` |
| ハブ | `LayoutGrid` |
| 設定 | `Settings` |
| 追加（FAB） | `Plus` |
| 戻る | `ArrowLeft` |
| チャット | `MessageCircle` |
| ToDo | `CheckSquare` |
| 写真 | `Image` |
| ゴール | `Target` |
| バッジ | `Award` |
| 時計 | `Clock` |
| 検索 | `Search` |
| フィルタ | `Filter` |
| 削除 | `Trash2` |
| 編集 | `Pencil` |

---

## 2. コンポーネント設計規格

### 2.1 ナビゲーション

#### モバイル: ボトムタブバー (< 1024px)

```
┌─────────────────────────────────────────────┐
│ [Calendar] [Bell]  [ScanLine] [Grid]  [Cog] │
│  カレンダー   通知    スキャン    ハブ     設定  │
└─────────────────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| タブ数 | 5 タブ（カレンダー / 通知 / スキャン / ハブ / 設定） |
| 高さ | 64px + `env(safe-area-inset-bottom)` |
| 背景 | `bg-white dark:bg-slate-800` |
| 上部ボーダー | `border-t border-slate-200 dark:border-slate-700` |
| アクティブ状態 | アイコン + ラベルが `text-indigo-500`、上部に 2px の `bg-indigo-500` インジケータ |
| 非アクティブ状態 | `text-slate-400 dark:text-slate-500` |
| タッチターゲット | 各タブ最小 44x44px（NFR-006 準拠） |
| 通知バッジ | 通知タブに未読数を赤丸バッジ（`bg-red-500 text-white text-xs min-w-[20px] h-5 rounded-full`） |

#### デスクトップ: サイドバー (>= 1024px)

| 項目 | 仕様 |
|-----|------|
| 幅 | 240px 固定 |
| 位置 | 左側、`position: fixed` |
| 背景 | `bg-white dark:bg-slate-800` |
| 右部ボーダー | `border-r border-slate-200 dark:border-slate-700` |
| ナビアイテム | アイコン + ラベル横並び、`py-3 px-4 rounded-lg` |
| アクティブ状態 | `bg-indigo-50 text-indigo-600 dark:bg-indigo-500/10 dark:text-indigo-400` |
| ホバー | `hover:bg-slate-50 dark:hover:bg-slate-700/50` |
| フッター | 家族アバター一覧 + 設定リンク |

---

### 2.2 カード

#### 基本カード

```
┌──────────────────────────────────┐
│  [内容]                           │
│                                  │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| 背景 | `bg-white dark:bg-slate-800` |
| 角丸 | `rounded-lg` (12px) |
| シャドウ | `shadow-md dark:shadow-none` |
| ボーダー（ダーク） | `dark:border dark:border-slate-700` |
| 内部余白 | `p-4` (16px) |

#### イベントカード

```
┌──┬───────────────────────────────┐
│色│ [カテゴリ] イベントタイトル      │
│帯│ 10:00 - 12:00   [アバター群]   │
└──┴───────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| 基本 | 基本カードを継承 |
| 左ボーダー | `border-l-4` + メンバーカラー（対象メンバーのカラー） |
| 複数メンバーの場合 | 最初のメンバーカラーを左ボーダーに適用。残りはアバター群で表現 |
| 時刻表示 | Inter フォント、`text-sm text-slate-500` |
| カテゴリラベル | `text-xs px-2 py-0.5 rounded-full bg-{category}-50 text-{category}-700` |

#### ToDo カード

| 項目 | 仕様 |
|-----|------|
| 基本 | 基本カードを継承 |
| 左ボーダー | 担当者のメンバーカラー |
| チェックボックス | 左端、24x24px、タップ領域 44x44px |
| 完了状態 | テキストに打消し線 `line-through`、`opacity-50` |
| 期限表示 | `text-sm`、期限超過時は `text-red-500` |

#### 通知カード

| 項目 | 仕様 |
|-----|------|
| 基本 | 基本カードを継承（`p-3` に縮小） |
| 未読 | 左に `w-2 h-2 rounded-full bg-indigo-500` ドット + `bg-indigo-50 dark:bg-indigo-500/5` |
| 既読 | ドットなし、背景なし |
| アイコン | 通知種別に応じたアイコン（予定: `Calendar`、ToDo: `CheckSquare`、スタンプ: `Heart`） |

---

### 2.3 ボタン

| バリアント | 背景 | テキスト | ボーダー | ホバー |
|-----------|------|---------|---------|-------|
| **Primary** | `bg-indigo-500` | `text-white` | なし | `hover:bg-indigo-600` |
| **Secondary** | `bg-white dark:bg-slate-800` | `text-slate-700 dark:text-slate-200` | `border border-slate-300 dark:border-slate-600` | `hover:bg-slate-50 dark:hover:bg-slate-700` |
| **Ghost** | `bg-transparent` | `text-slate-600 dark:text-slate-400` | なし | `hover:bg-slate-100 dark:hover:bg-slate-700` |
| **Danger** | `bg-red-500` | `text-white` | なし | `hover:bg-red-600` |

**共通仕様:**

| 項目 | 仕様 |
|-----|------|
| 高さ | 44px（タッチターゲット確保） |
| 角丸 | `rounded-md` (8px) |
| フォント | `text-base font-medium` (16px / 500) |
| パディング | `px-4 py-2` |
| 無効状態 | `opacity-50 cursor-not-allowed` |
| フォーカス | `focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2` |
| トランジション | `transition-colors duration-150` |

#### FAB（Floating Action Button）

| 項目 | 仕様 |
|-----|------|
| サイズ | 56x56px |
| 位置 | 右下固定 `fixed bottom-24 right-5`（ボトムタブバーの上） |
| 背景 | `bg-indigo-500` |
| アイコン | `Plus` (白、24px) |
| シャドウ | `shadow-lg` |
| 角丸 | `rounded-full` |
| ホバー | `hover:bg-indigo-600` |
| タップ | `active:scale-95` |
| デスクトップ位置 | `bottom-8 right-8` |

---

### 2.4 フォーム

#### テキスト入力

| 項目 | 仕様 |
|-----|------|
| 高さ | 48px |
| 角丸 | `rounded-md` (8px) |
| ボーダー | `border border-slate-300 dark:border-slate-600` |
| 背景 | `bg-white dark:bg-slate-800` |
| フォーカス | `focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500` |
| プレースホルダー | `placeholder:text-slate-400` |
| パディング | `px-3 py-2` |
| フォント | `text-base` (16px) — iOS ズーム防止のため 16px 以上を使用 |
| ラベル | `text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5` |
| エラー | `border-red-500 focus:ring-red-500` + エラーメッセージ `text-sm text-red-500 mt-1` |

#### セレクト / ドロップダウン

基本仕様はテキスト入力と同一。ネイティブの `<select>` を使用し、カスタムドロップダウンは使わない（モバイルの操作性を優先）。

#### トグルスイッチ

| 項目 | 仕様 |
|-----|------|
| サイズ | 幅 44px × 高さ 24px |
| ON | `bg-indigo-500` + 白丸を右端に |
| OFF | `bg-slate-300 dark:bg-slate-600` + 白丸を左端に |
| トランジション | `transition-all duration-200` |
| タッチターゲット | 44x44px 以上 |

#### メンバーセレクター（カスタム）

```
┌──────────────────────────────────────┐
│ 対象メンバー                          │
│ [🔵パパ] [🩷ママ] [🟡娘]  [🟢息子]    │
│   ON       ON      OFF      OFF     │
└──────────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| レイアウト | 横並び `flex gap-2` |
| 各アイテム | アバター + 表示名、タップで ON/OFF |
| ON 状態 | メンバーカラーのリング `ring-2 ring-{member}-500` + `bg-{member}-50` |
| OFF 状態 | `bg-slate-100 dark:bg-slate-700 opacity-50` |
| タッチターゲット | 各アイテム 44x44px 以上 |

---

### 2.5 カレンダー

#### 月間ビュー（CAL-004 対応）

```
┌──────────────────────────────────────┐
│  < 2026年3月 >    [今日] [フィルタ]   │
│                                      │
│  日  月  火  水  木  金  土           │
│ ┌───┬───┬───┬───┬───┬───┬───┐      │
│ │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │      │
│ │   │■■■│   │■■■│   │   │   │      │
│ ├───┼───┼───┼───┼───┼───┼───┤      │
│ │ 8 │ 9 │10 │11 │12 │13 │14 │      │
│ │■■■│   │■■■■■■■■■■■│   │   │      │
│ │■  │   │           │   │   │      │
│ └───┴───┴───┴───┴───┴───┴───┘      │
│                                      │
│ (日付セルをタップ → 日別詳細モーダル)  │
└──────────────────────────────────────┘

■ = メンバーカラーのイベントピル（バー）
複数日にまたがるイベントは grid-column: span N で連続表示
```

| 項目 | 仕様 |
|-----|------|
| 曜日順序 | **日曜始まり**（日 月 火 水 木 金 土） |
| レイアウト | ウィークロー方式（[セクション 1.3](#13-スペーシング--グリッド) 参照） |
| イベント表示 | メンバーカラーのピル（バー）を各週のトラック行に表示。カラー仕様は [セクション 1.1 ピルカラー](#カレンダーイベントピル-カラー仕様) に準拠 |
| 複数日イベント | `grid-column: span N` で日をまたいで連続表示。始端は左角丸、中間は角丸なし、終端は右角丸 |
| ピルサイズ | `font-size: 10.5px`, `line-height: 1.45`, `font-weight: 500`, `border-radius: 3px` |
| トラック割り当て | 複数日イベントを優先的に上のトラックに配置。単日イベントは残りのトラックに配置 |
| 今日 | 日付数字に `bg-indigo-500 text-white rounded-full w-7 h-7` |
| 他月の日付 | `text-slate-300 dark:text-slate-600` |
| 土曜 | `text-blue-500` |
| 日曜・祝日 | `text-red-500` |
| 月切替 | `<` `>` ボタン、左右スワイプでも切替可能 |
| 日付タップ | セル（ピルや空白部分含む）をタップすると**日別詳細モーダル**がスライドアップ表示（[セクション 4.2](#42-モーダル) のアニメーション仕様に準拠） |

#### 日別詳細モーダル

日付セルタップ時に表示されるボトムシートモーダル。

```
┌──────────────────────────────────────┐
│  ──── (ドラッグハンドル) ────          │
│                                      │
│  3月8日 (日) の予定                   │
│                                      │
│  ┌──┬────────────────────────┐      │
│  │青│ 会議 10:00-11:00       │      │
│  │帯│ オフィス               │      │
│  └──┴────────────────────────┘      │
│  ┌──┬────────────────────────┐      │
│  │桃│ 授業参観 14:00-15:00   │      │
│  │帯│ 〇〇小学校             │      │
│  └──┴────────────────────────┘      │
│                                      │
│  [＋ 予定を追加]                      │
└──────────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| 表示方式 | ボトムシートモーダル（下からスライドアップ） |
| 背景 | `bg-white dark:bg-slate-800 rounded-t-2xl` |
| ドラッグハンドル | `w-10 h-1 bg-slate-300 rounded-full mx-auto mt-3` |
| イベントカード | 左ボーダーにメンバーカラー + タイトル + 時刻 + 場所 |
| 予定追加ボタン | Ghost バリアント、タップで予定作成画面へ遷移 |
| 閉じる | 下方向ドラッグまたはオーバーレイタップ |
| 予定なし | エンプティステート「予定はありません」 |

#### 週間ビュー（CAL-005 対応）

```
┌──────────────────────────────────────┐
│  < 3/2週 >          [今日] [フィルタ] │
│                                      │
│     日   月   火   水   木   金   土  │
│ 8:00 ┌───┬───┬───┬───┬───┬───┬───┐ │
│      │   │   │▓▓▓│   │   │   │   │ │
│ 9:00 │   │   │▓▓▓│   │███│   │   │ │
│      │   │   │   │   │███│   │   │ │
│10:00 │   │   │   │   │   │   │   │ │
│      ├───╌╌╌╌╌╌╌╌ 現在時刻 ╌╌╌╌╌╌┤ │
│11:00 │   │   │   │   │   │   │   │ │
│      └───┴───┴───┴───┴───┴───┴───┘ │
└──────────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| 曜日順序 | **日曜始まり**（月間ビューと統一） |
| グリッド | `grid-template-columns: 48px repeat(7, 1fr)` |
| 時刻列 | 左端 48px、`text-xs text-slate-400`、Inter フォント |
| 行高 | 1 時間 = 60px |
| イベント | メンバーカラーの `bg-{member}-100 border-l-2 border-{member}-500 rounded-md p-1` |
| 現在時刻ライン | `bg-red-500 h-0.5` + 左端に `w-2 h-2 rounded-full bg-red-500` |
| 週切替 | 左右矢印 + スワイプ |

#### 日別ビュー（CAL-006 対応）

| 項目 | 仕様 |
|-----|------|
| レイアウト | 時系列のイベントカードリスト |
| 終日イベント | 上部に固定表示、メンバーカラーの `bg-{member}-50` |
| 時刻付きイベント | 左に時刻表示（Inter フォント）、右にイベントカード |
| 空き時間 | 表示しない（予定のみリスト表示） |
| タップ | イベント詳細画面（`/events/[id]`）へ遷移 |

#### メンバーフィルタ（CAL-007 対応）

```
┌──────────────────────────────────────┐
│  [🔵パパ] [🩷ママ] [🟡娘]  [🟢息子]  │
│    ON       ON      ON       ON     │
└──────────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| 位置 | カレンダーヘッダー下、スクロール固定 |
| 各アイテム | メンバーアバター（32px） + 表示名 |
| ON 状態 | 通常表示 |
| OFF 状態 | `opacity-30 grayscale` |
| タップ | ON/OFF トグル。全員 OFF の場合は自動的に全員 ON に戻す |

---

### 2.6 メンバーアバター

イニシャル表示のアバター。プロフィール画像は使用しない（シンプルさを優先）。

| サイズ名 | px | Tailwind | 用途 |
|---------|:---:|---------|------|
| XS | 24px | `w-6 h-6` | インラインアイコン、ドット代替 |
| SM | 32px | `w-8 h-8` | フィルタ、リスト内 |
| MD | 40px | `w-10 h-10` | カード内、チャットメッセージ |
| LG | 56px | `w-14 h-14` | プロフィール、ヘッダー |
| XL | 80px | `w-20 h-20` | 設定画面プロフィール |

**共通仕様:**

| 項目 | 仕様 |
|-----|------|
| 形状 | `rounded-full` |
| 背景 | メンバーカラー 500 |
| テキスト | 白 `text-white`、太字 `font-bold` |
| テキストサイズ | XS: 10px, SM: 12px, MD: 14px, LG: 18px, XL: 24px |
| コンテンツ | メンバー表示名の先頭 1 文字 |

---

### 2.7 バッジ & スタンプ

#### バッジ（GAME-003 対応）

全 7 種のバッジを定義する。

| バッジ名 | 獲得条件 | アイコン |
|---------|---------|---------|
| はじめの一歩 | 初回ログイン | `Footprints` |
| スキャンマスター | AIスキャンを初めて完了 | `ScanLine` |
| ToDoコンプリート | ToDoを10個完了 | `CheckCircle` |
| カレンダーキング | 予定を30個作成 | `Crown` |
| ファミリーヒーロー | スタンプを10回送信 | `Heart` |
| 連続ログイン7日 | 7日連続でアプリを使用 | `Flame` |
| アルバムマスター | 写真を10枚アップロード | `Camera` |

| 項目 | 仕様 |
|-----|------|
| サイズ | 64x64px |
| 形状 | 円形（`rounded-full`） |
| 獲得済み | カラー表示（各バッジ固有のグラデーション背景） |
| 未獲得 | `bg-slate-200 dark:bg-slate-700 opacity-40`、アイコンはグレー |
| 獲得アニメーション | [セクション 4](#4-アニメーション--マイクロインタラクション) 参照 |

#### スタンプ（STAMP-001 対応）

全 5 種のスタンプリアクション。

| スタンプ名 | アイコン | カラー |
|-----------|---------|-------|
| ありがとう | `Heart` | `#EF4444` (Red-500) |
| 了解 | `ThumbsUp` | `#3B82F6` (Blue-500) |
| がんばれ | `Zap` | `#F59E0B` (Amber-500) |
| おつかれ | `Coffee` | `#8B5CF6` (Violet-500) |
| いいね | `Star` | `#EAB308` (Yellow-500) |

| 項目 | 仕様 |
|-----|------|
| 表示サイズ | 32x32px |
| タップ領域 | 44x44px |
| 選択UI | イベント詳細画面のスタンプバー（横並び） |
| 送信済み | アイコン下に送信者名（`text-xs`）を表示 |
| 送信アニメーション | バウンスエフェクト（[セクション 4](#4-アニメーション--マイクロインタラクション) 参照） |

---

### 2.8 状態表示（ローディング・エンプティ）

#### スケルトンスクリーン

データ取得中のローディング表示として、コンテンツの形状を模したスケルトンを表示する。

| 項目 | 仕様 |
|-----|------|
| 背景 | `bg-slate-200 dark:bg-slate-700` |
| アニメーション | `animate-pulse`（Tailwind 標準） |
| カード | カードの形状（角丸、左ボーダー含む）を再現 |
| テキスト行 | `h-4 rounded` で複数行を表現 |
| アバター | `rounded-full` の円形 |

#### AI スキャン専用ローディング

| 項目 | 仕様 |
|-----|------|
| 表示 | 画面中央、半透明オーバーレイ |
| アニメーション | スキャンライン（上から下へ移動するライン）+ パルスするアイコン |
| テキスト | 「お便りを読み取っています...」`text-base text-slate-600` |
| 進捗 | 不定（indeterminate）プログレスバー `bg-indigo-500` |
| 所要時間 | 5〜15 秒を想定 |

#### エンプティステート

予定やToDoが 0 件の場合に表示する。

| 項目 | 仕様 |
|-----|------|
| レイアウト | 画面中央、縦並び |
| イラスト / アイコン | Lucide アイコン（64px、`text-slate-300`） |
| メッセージ | `text-lg font-medium text-slate-500 mt-4` |
| サブメッセージ | `text-sm text-slate-400 mt-1` |
| CTA | Primary ボタン（例: 「予定を作成する」） |

**画面別エンプティメッセージ:**

| 画面 | アイコン | メッセージ | サブメッセージ |
|-----|---------|----------|-------------|
| カレンダー（予定なし） | `CalendarPlus` | 予定はまだありません | 家族の予定を追加しましょう |
| 通知センター | `BellOff` | 通知はありません | 新しい通知が届くとここに表示されます |
| ToDo リスト | `ListChecks` | ToDoはありません | やることリストを作成しましょう |
| チャット | `MessageCircle` | メッセージはまだありません | この予定について相談しましょう |
| アルバム | `ImagePlus` | 写真はまだありません | イベントに写真を追加しましょう |

---

### 2.9 トースト通知

アプリ内の操作フィードバックに使用するインライントースト。

| 項目 | 仕様 |
|-----|------|
| 位置 | 画面上部、セーフエリア内 `top-4` + `env(safe-area-inset-top)` |
| 幅 | `max-w-sm mx-auto` (画面中央) |
| 背景 | `bg-white dark:bg-slate-800 shadow-lg` |
| 角丸 | `rounded-lg` |
| アニメーション | 上からスライドイン（`y: -100% → 0`）、Framer Motion 使用 |
| 自動消去 | **3 秒** 後に自動でフェードアウト |
| 手動消去 | 右端の `X` ボタンまたはスワイプアップ |
| バリアント | Success（左に緑バー）/ Error（左に赤バー）/ Info（左に青バー）/ Warning（左に黄バー） |
| 内容 | アイコン + メッセージテキスト（1 行） |

---

## 3. 画面別デザイン方針（全13画面）

### 画面 1: ログイン (`/login`) — P1

**対応要件:** AUTH-001

#### レイアウト

```
┌──────────────────────────────────┐
│                                  │
│                                  │
│         [アプリロゴ]              │
│    コネクト・ファミリー・ハブ       │
│                                  │
│     ●  ●  ●  ●                   │
│    (4色ドットアニメーション)        │
│                                  │
│   ┌──────────────────────┐       │
│   │  G  Googleでログイン   │       │
│   └──────────────────────┘       │
│                                  │
│                                  │
│   家族の予定をひとつに。           │
│                                  │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| レイアウト | 画面中央寄せ（`flex items-center justify-center min-h-screen`） |
| 背景 | `bg-slate-50 dark:bg-slate-900` |
| アプリロゴ | テキストロゴ `text-2xl font-bold text-indigo-500` |
| 4色ドットアニメーション | パパ(Blue) → ママ(Pink) → 娘(Yellow) → 息子(Green) の順にパルスアニメーション（Framer Motion `staggerChildren: 0.15`） |
| Google ログインボタン | Google 公式ガイドラインに準拠したデザイン。白背景 + Google ロゴ + テキスト |
| キャッチコピー | `text-sm text-slate-500 mt-8` |

#### インタラクション

- ログインボタンタップ → Google OAuth フローへ遷移
- ログイン成功 → 家族グループ未所属の場合 `/setup` へ、所属済みの場合 `/` へ

---

### 画面 2: 初期セットアップ (`/setup`) — P1

**対応要件:** AUTH-002, AUTH-003

#### レイアウト — 3 ステップウィザード

```
ステップ1: グループ作成 or 招待コード入力
┌──────────────────────────────────┐
│  ステップ 1/3                     │
│  ═══●───────────────             │
│                                  │
│  新しい家族グループを作りますか？   │
│  それとも招待コードがありますか？   │
│                                  │
│  ┌──────────────────────┐       │
│  │ 家族グループを作成     │       │
│  └──────────────────────┘       │
│  ┌──────────────────────┐       │
│  │ 招待コードで参加       │       │
│  └──────────────────────┘       │
└──────────────────────────────────┘

ステップ2: プロフィール設定
┌──────────────────────────────────┐
│  ステップ 2/3                     │
│  ═══════●───────                 │
│                                  │
│  あなたの情報を設定してください     │
│                                  │
│  表示名: [          ]            │
│  ロール: [parent ▼]             │
│                                  │
│  カラーを選んでください:           │
│  [🔵] [🩷] [🟡] [🟢]            │
│                                  │
│  [次へ]                          │
└──────────────────────────────────┘

ステップ3: 完了
┌──────────────────────────────────┐
│  ステップ 3/3                     │
│  ═══════════════●               │
│                                  │
│        🎉                        │
│  セットアップ完了！                │
│                                  │
│  〇〇家 へようこそ               │
│                                  │
│  招待コード: ABC-123             │
│  (家族に共有してください)          │
│                                  │
│  [はじめる]                      │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| プログレスバー | 3 ステップのプログレスインジケータ、`bg-indigo-500` |
| コンテナ | `max-w-md mx-auto px-5 pt-12` |
| カラー選択 | 4 色の丸ボタン（56x56px）、選択時は `ring-2 ring-offset-2` |
| 招待コード表示 | モノスペースフォント、`text-2xl tracking-wider`、コピー可能 |
| 遷移 | 各ステップ間はスライドアニメーション |

---

### 画面 3: メインボード (`/`) — P1

**対応要件:** CAL-004, CAL-007, CAL-008

#### レイアウト

```
┌──────────────────────────────────┐
│  コネクト・ファミリー・ハブ  [🔔3] │
│                                  │
│  [🔵パパ] [🩷ママ] [🟡娘] [🟢息子]│
│                                  │
│  < 2026年3月 >          [今日]   │
│  日  月  火  水  木  金  土       │
│ ┌───┬───┬───┬───┬───┬───┬───┐  │
│ │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │  │
│ │   │■■■│   │■■■│   │   │   │  │
│ ├───┼───┼───┼───┼───┼───┼───┤  │
│ │ 8 │ 9 │10 │11 │12 │13 │14 │  │
│ │■■■│   │■■■■■■■■■■■│   │   │  │
│ │■  │   │           │   │   │  │
│ ├───┼───┼───┼───┼───┼───┼───┤  │
│ │...                             │  │
│ └───┴───┴───┴───┴───┴───┴───┘  │
│                                  │
│                          [＋FAB] │
│                                  │
│ [📅] [🔔] [📷] [📋] [⚙️]        │
└──────────────────────────────────┘

■ = メンバーカラーのイベントピル
日付セルをタップ → 日別詳細モーダル表示
```

| 項目 | 仕様 |
|-----|------|
| ヘッダー | アプリ名 + 通知ベルアイコン（未読バッジ付き） |
| メンバーフィルタ | ヘッダー下に固定、横スクロール不要（4 人固定） |
| カレンダー | 月間ビュー — フルハイトでカレンダーが画面全体を使用（[セクション 2.5](#25-カレンダー) 参照） |
| イベント表示 | メンバーカラーのピル（バー）でカレンダーセル内に直接表示。複数日イベントは `grid-column: span N` で連続表示 |
| 日付タップ | セルをタップすると**日別詳細モーダル**（ボトムシート）がスライドアップ。該当日のイベントカードリストを表示 |
| FAB | 右下固定、予定作成画面（`/events/new`）へ遷移 |
| ビュー切替 | ヘッダー内に月間 / 週間 / 日別の切替タブ |
| Pull-to-refresh | 下に引いてデータ再取得 |

---

### 画面 4: 週間ビュー (`/week`) — P1

**対応要件:** CAL-005

| 項目 | 仕様 |
|-----|------|
| レイアウト | 週間タイムライングリッド（[セクション 2.5](#25-カレンダー) 参照） |
| ヘッダー | 週番号 + 日付範囲 + ナビゲーション矢印 + 今日ボタン |
| メンバーフィルタ | メインボードと同一 |
| 現在時刻ライン | 赤いライン `bg-red-500` + 左端にドット |
| スワイプ | 左右スワイプで前週/翌週に切替 |
| イベントタップ | イベント詳細（`/events/[id]`）へ遷移 |
| 表示時間帯 | 7:00〜21:00 をデフォルト表示（スクロールで全時間帯閲覧可能） |

---

### 画面 5: 日別ビュー (`/day/[date]`) — P1

**対応要件:** CAL-006

```
┌──────────────────────────────────┐
│  ← 3月8日(木)                    │
│                                  │
│  ── 終日 ──                      │
│  ┌──────────────────────────┐   │
│  │ 🟡 春休み開始              │   │
│  └──────────────────────────┘   │
│                                  │
│  ── 午前 ──                      │
│  10:00  ┌──┬─────────────────┐  │
│         │🔵│ 会議              │  │
│         │  │ 10:00-11:00     │  │
│         └──┴─────────────────┘  │
│                                  │
│  ── 午後 ──                      │
│  14:00  ┌──┬─────────────────┐  │
│         │🩷│ 授業参観          │  │
│         │  │ 14:00-15:00     │  │
│         └──┴─────────────────┘  │
│                                  │
│                          [＋FAB] │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| ヘッダー | 戻るボタン + 日付（曜日付き） |
| 終日イベント | 上部に固定表示、メンバーカラーの `bg-{member}-50` 背景 |
| 時間帯グループ | 「午前」「午後」「夕方」でセクション分け |
| 時刻表示 | 左端に Inter フォントで時刻表示 |
| イベントカード | イベントカードコンポーネント（[セクション 2.2](#22-カード) 参照） |
| タップ | イベント詳細画面へ遷移 |
| 空の場合 | エンプティステート表示 |

---

### 画面 6: 予定作成 / 編集 (`/events/new`, `/events/[id]/edit`) — P1

**対応要件:** CAL-001, CAL-002, CAL-003

#### レイアウト — フルスクリーンモーダル

```
┌──────────────────────────────────┐
│  ✕ 新しい予定          [保存]    │
│ ─────────────────────────────── │
│                                  │
│  タイトル *                       │
│  ┌──────────────────────────┐   │
│  │                          │   │
│  └──────────────────────────┘   │
│                                  │
│  日付 *                          │
│  ┌──────────────────────────┐   │
│  │ 2026-03-08               │   │
│  └──────────────────────────┘   │
│                                  │
│  □ 終日                          │
│                                  │
│  開始時刻          終了時刻       │
│  ┌───────────┐  ┌───────────┐  │
│  │ 10:00      │  │ 11:00      │  │
│  └───────────┘  └───────────┘  │
│                                  │
│  対象メンバー                     │
│  [🔵パパ] [🩷ママ] [🟡娘] [🟢息子]│
│                                  │
│  カテゴリ                        │
│  ┌──────────────────────────┐   │
│  │ 学校 ▼                   │   │
│  └──────────────────────────┘   │
│                                  │
│  メモ                            │
│  ┌──────────────────────────┐   │
│  │                          │   │
│  │                          │   │
│  └──────────────────────────┘   │
│                                  │
│  [削除] (編集時のみ)              │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| 表示方式 | モバイル: フルスクリーンモーダル（下からスライドアップ）、デスクトップ: 中央モーダル(`max-w-lg`) |
| ヘッダー | 左に閉じるボタン(`X`)、右に保存ボタン(Primary) |
| フォーム要素 | [セクション 2.4](#24-フォーム) のフォーム仕様に準拠 |
| メンバーセレクター | カスタムメンバーセレクター、複数選択可 |
| 日付ピッカー | ネイティブ `<input type="date">` |
| 時刻ピッカー | ネイティブ `<input type="time">` |
| 終日トグル | ON の場合、時刻入力を非表示に |
| カテゴリ | ネイティブ `<select>`: 学校 / 仕事 / 家庭 / 習い事 / その他 |
| 削除ボタン | 編集画面のみ表示、Danger バリアント、確認ダイアログ付き |
| バリデーション | タイトルと日付は必須。未入力時はフィールドにエラー表示 |

---

### 画面 7: イベント詳細 + チャット (`/events/[id]`) — P1(基本) + P2(チャット)

**対応要件:** CAL-006, CHAT-001, CHAT-002, CHAT-003, STAMP-001, STAMP-002

```
┌──────────────────────────────────┐
│  ← イベント詳細          [✏️]    │
│ ─────────────────────────────── │
│                                  │
│  授業参観                        │
│  📅 2026年3月8日(木)             │
│  🕐 14:00 - 15:00               │
│  📍 〇〇小学校                   │
│  👥 ママ, 娘                     │
│  📁 学校                         │
│                                  │
│  メモ:                           │
│  体育館で実施。上履き持参。        │
│                                  │
│ ─── スタンプ ───                  │
│  [❤️ありがとう] [👍了解] [⚡がんばれ]│
│  [☕おつかれ]   [⭐いいね]         │
│                                  │
│ ─── チャット (P2) ───            │
│  ┌────────────────────────┐     │
│  │ 🩷ママ 3/7 10:00       │     │
│  │ 上履き新しいの買った？   │     │
│  └────────────────────────┘     │
│  ┌────────────────────────┐     │
│  │ 🔵パパ 3/7 12:30       │     │
│  │ まだ。今日買ってくる     │     │
│  └────────────────────────┘     │
│                                  │
│  ┌────────────────────┐ [送信]  │
│  │ メッセージを入力...    │        │
│  └────────────────────┘         │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| ヘッダー | 戻るボタン + 「イベント詳細」+ 編集ボタン |
| 情報セクション | アイコン + ラベル形式で各項目を表示 |
| 対象メンバー | メンバーアバター(SM) + 表示名をカンマ区切り |
| スタンプバー | 横並びスタンプボタン、タップで送信、送信済みはカウント表示 |
| チャットスレッド | 時系列（古い順）、メンバーアバター(MD) + 名前 + 時刻 + メッセージ |
| 自分のメッセージ | 右寄せ `bg-indigo-50 dark:bg-indigo-500/10` |
| 他人のメッセージ | 左寄せ `bg-slate-100 dark:bg-slate-700` |
| 入力エリア | 画面下部固定、テキスト入力 + 画像添付ボタン + 送信ボタン |
| 画像送信 | サムネイル表示（`max-w-48 rounded-lg`）、タップで全画面表示 |

---

### 画面 8: 通知センター (`/notifications`) — P1

**対応要件:** PUSH-004

```
┌──────────────────────────────────┐
│  通知                            │
│ ─────────────────────────────── │
│                                  │
│  ─── 今日 ───                    │
│  ● 📅 明日の予定: 授業参観        │
│    14:00 - ママ, 娘              │
│    2分前                         │
│                                  │
│  ● ✅ ToDoの期限: 持ち物準備      │
│    明日まで - 娘                  │
│    1時間前                        │
│                                  │
│  ─── 昨日 ───                    │
│    📅 予定リマインド: 会議         │
│    10:00 - パパ                   │
│    昨日 7:00                      │
│                                  │
│    ❤️ ママからスタンプ: ありがとう  │
│    昨日 18:00                     │
│                                  │
│  ─── 3月6日 ───                  │
│    ...                           │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| ヘッダー | 「通知」タイトル |
| グルーピング | 日付別（今日 / 昨日 / 日付表示）|
| 未読通知 | 左に `bg-indigo-500` ドット + `bg-indigo-50 dark:bg-indigo-500/5` 背景 |
| 既読通知 | ドットなし、通常背景 |
| 通知アイコン | 種別に応じたアイコン（予定: `Calendar`、ToDo: `CheckSquare`、スタンプ: `Heart`） |
| タップ | 該当イベント(`/events/[id]`) または ToDo(`/hub`) へ遷移 |
| 時刻表示 | 相対時刻（〇分前、〇時間前）→ 24 時間超は絶対時刻 |
| Pull-to-refresh | 下に引いて最新通知を取得 |
| 空の場合 | エンプティステート |

---

### 画面 9: AI スキャナー (`/scan`) — P2

**対応要件:** SCAN-001, SCAN-002, SCAN-003, SCAN-004

#### 3 ステップフロー

```
ステップ1: 撮影 / 選択
┌──────────────────────────────────┐
│  ← AIスキャン                    │
│  ═══●───────────────             │
│                                  │
│  ┌──────────────────────────┐   │
│  │                          │   │
│  │    [カメラプレビュー]      │   │
│  │    or                    │   │
│  │    [画像プレビュー]        │   │
│  │                          │   │
│  └──────────────────────────┘   │
│                                  │
│  ┌────────────┐ ┌────────────┐  │
│  │ 📷 撮影    │ │ 🖼 選択     │  │
│  └────────────┘ └────────────┘  │
│                                  │
│              [解析する]           │
└──────────────────────────────────┘

ステップ2: AI解析中
┌──────────────────────────────────┐
│  ← AIスキャン                    │
│  ═══════●───────                 │
│                                  │
│                                  │
│         [スキャンアニメーション]    │
│                                  │
│    お便りを読み取っています...     │
│                                  │
│    ┌──────────────────────┐     │
│    │ ████████░░░░░░░░░░░░ │     │
│    └──────────────────────┘     │
│                                  │
└──────────────────────────────────┘

ステップ3: 結果確認 / 登録
┌──────────────────────────────────┐
│  ← AIスキャン                    │
│  ═══════════════●               │
│                                  │
│  2件のイベントが見つかりました     │
│                                  │
│  ┌──────────────────────────┐   │
│  │ ✏️ 授業参観               │   │
│  │ 📅 2026-03-15            │   │
│  │ 🕐 14:00 - 15:00         │   │
│  │ 👤 [メンバー選択 ▼]       │   │
│  └──────────────────────────┘   │
│  ┌──────────────────────────┐   │
│  │ ✏️ 遠足                   │   │
│  │ 📅 2026-03-22            │   │
│  │ 🕐 08:30                  │   │
│  │ 🎒 持ち物: 水筒、弁当     │   │
│  │ 👤 [メンバー選択 ▼]       │   │
│  └──────────────────────────┘   │
│                                  │
│  [すべて登録する]                 │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| プログレス | 3 ステップインジケータ |
| ステップ 1 | カメラ撮影 or ギャラリー選択。プレビュー表示後「解析する」ボタン |
| ステップ 2 | AI スキャン専用ローディング（[セクション 2.8](#28-状態表示ローディングエンプティ) 参照） |
| ステップ 3 | 解析結果を編集可能なカード形式で表示。各項目はインライン編集可 |
| メンバー選択 | 各イベントに対象メンバーを選択するドロップダウン |
| 一括登録 | 「すべて登録する」Primary ボタン。登録成功後はカレンダーへ遷移 |
| エラー時 | エラーメッセージ + 「もう一度試す」ボタン |
| parent 権限 | parent のみ登録確定可能（child は撮影・解析まで可能だがボタン無効化） |

---

### 画面 10: 学校 / ToDo ハブ (`/hub`) — P2

**対応要件:** TODO-001〜004, ARCHIVE-001〜003, SCHOOL-001〜003

#### 4 タブ構成

```
┌──────────────────────────────────┐
│  ハブ                            │
│                                  │
│  [ToDo] [アーカイブ] [時間割] [献立]│
│  ━━━━━                           │
│                                  │
│  (ToDo タブ選択時)                │
│  未完了 (5) | 完了済み (3)        │
│                                  │
│  ┌──┬────────────────────────┐  │
│  │🩷│ □ 牛乳を買う           │  │
│  │  │   期限: 3/8 - ママ      │  │
│  └──┴────────────────────────┘  │
│  ┌──┬────────────────────────┐  │
│  │🟡│ □ 持ち物準備            │  │
│  │  │   期限: 3/9 - 娘       │  │
│  └──┴────────────────────────┘  │
│                                  │
│                          [＋FAB] │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| タブバー | 上部タブ（`border-b-2 border-indigo-500` でアクティブ表示） |
| **ToDo タブ** | 未完了/完了済みの切替 + ToDo カードリスト + FAB で新規作成 |
| **アーカイブタブ** | スキャン書類のサムネイルグリッド（`grid-cols-2 gap-3`）。メンバーフィルタ付き |
| **時間割タブ** | 曜日 × 時限のテーブル。メンバー切替（娘/息子）タブ付き |
| **献立タブ** | 日付別リスト表示。メンバー切替付き |
| Pull-to-refresh | 各タブでデータ再取得 |

---

### 画面 11: ゴール / リワード (`/goals`) — P3

**対応要件:** GAME-001, GAME-002, GAME-003

```
┌──────────────────────────────────┐
│  ゴール & リワード               │
│                                  │
│  ─── 今週のゴール ───             │
│  ┌──────────────────────────┐   │
│  │ 🎯 家族の予定を全員が確認   │   │
│  │ ████████████░░░ 75%       │   │
│  │ あと1人！                  │   │
│  └──────────────────────────┘   │
│  ┌──────────────────────────┐   │
│  │ 🎯 ToDoを全部完了          │   │
│  │ ██████░░░░░░░░░ 40%       │   │
│  │ 残り3件                    │   │
│  └──────────────────────────┘   │
│                                  │
│  ─── バッジコレクション ───       │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐  │
│  │🏆  │ │📷  │ │✅  │ │🔒  │  │
│  │初回 │ │ｽｷｬﾝ│ │ToDo│ │???  │  │
│  └────┘ └────┘ └────┘ └────┘  │
│  ┌────┐ ┌────┐ ┌────┐         │
│  │🔒  │ │🔒  │ │🔒  │         │
│  │???  │ │???  │ │???  │         │
│  └────┘ └────┘ └────┘          │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| ゴールカード | タイトル + プログレスバー + 進捗テキスト |
| プログレスバー | `bg-slate-200 dark:bg-slate-700` + `bg-indigo-500`（進捗部分）、`h-3 rounded-full` |
| 週間/月間切替 | ヘッダー内のセグメントコントロール |
| バッジグリッド | `grid-cols-4 gap-4`、各バッジは [セクション 2.7](#27-バッジ--スタンプ) に準拠 |
| 獲得時 | バッジ獲得アニメーション（[セクション 4](#4-アニメーション--マイクロインタラクション) 参照） |

---

### 画面 12: アルバム (`/album`) — P3

**対応要件:** ALBUM-001, ALBUM-002, ALBUM-003

```
┌──────────────────────────────────┐
│  アルバム                        │
│                                  │
│  ─── 2026年3月 ───               │
│  📊 サマリー: 予定12件 / ToDo8完了 │
│     バッジ2獲得 / 写真5枚        │
│                                  │
│  ┌────────┐ ┌────────┐         │
│  │ 📷     │ │ 📷     │         │
│  │        │ │        │         │
│  │授業参観 │ │お花見   │         │
│  │ 3/15   │ │ 3/22   │         │
│  └────────┘ └────────┘         │
│  ┌────────┐ ┌────────┐         │
│  │ 📷     │ │ 📷     │         │
│  │        │ │        │         │
│  │遠足    │ │誕生会   │         │
│  │ 3/25   │ │ 3/28   │         │
│  └────────┘ └────────┘         │
│                                  │
│  ─── 2026年2月 ───               │
│  ...                             │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| レイアウト | 月別タイムライン（新しい月が上） |
| 月間サマリー | 各月の冒頭にサマリーカード（イベント数、ToDo 完了数、バッジ獲得数、写真数） |
| 写真グリッド | `grid-cols-2 gap-3`、アスペクト比 `aspect-square` |
| 写真カード | 画像 + イベント名 + 日付のオーバーレイ |
| タップ | 写真全画面表示（ピンチズーム対応） |
| 月の区切り | `text-lg font-bold` + 区切り線 |
| Pull-to-refresh | データ再取得 |

---

### 画面 13: 設定 (`/settings`) — P1

**対応要件:** AUTH-004, AUTH-005

```
┌──────────────────────────────────┐
│  設定                            │
│                                  │
│  ─── プロフィール ───             │
│  ┌──────────────────────────┐   │
│  │ [🔵80px] パパ             │   │
│  │          papa@example.com │   │
│  │          [プロフィール編集] │   │
│  └──────────────────────────┘   │
│                                  │
│  ─── 家族グループ ───             │
│  ┌──────────────────────────┐   │
│  │ グループ名    〇〇家      │   │
│  │ 招待コード    ABC-123  📋 │   │
│  │ メンバー      4人         │   │
│  └──────────────────────────┘   │
│                                  │
│  ─── 通知設定 ───                │
│  ┌──────────────────────────┐   │
│  │ プッシュ通知    [ON/OFF]  │   │
│  │ 朝の通知(7:00)  [ON/OFF]  │   │
│  │ 昼の通知(12:00) [ON/OFF]  │   │
│  │ 午後の通知(15:00)[ON/OFF] │   │
│  │ 夕方の通知(18:00)[ON/OFF] │   │
│  └──────────────────────────┘   │
│                                  │
│  ─── 表示設定 ───                │
│  ┌──────────────────────────┐   │
│  │ ダークモード    [ON/OFF]  │   │
│  │ 週の開始日     [日曜 ▼]   │   │
│  └──────────────────────────┘   │
│                                  │
│  ─── その他 ───                  │
│  ┌──────────────────────────┐   │
│  │ バージョン      v1.0.0   │   │
│  │ [ログアウト]              │   │
│  └──────────────────────────┘   │
└──────────────────────────────────┘
```

| 項目 | 仕様 |
|-----|------|
| レイアウト | セクション分けリスト |
| セクション | プロフィール / 家族グループ / 通知設定 / 表示設定 / その他 |
| プロフィール | アバター(XL) + 表示名 + メールアドレス + 編集リンク |
| 招待コード | タップでクリップボードにコピー + トースト「コピーしました」 |
| トグルスイッチ | [セクション 2.4](#24-フォーム) のトグル仕様に準拠 |
| ログアウト | Danger テキストボタン、確認ダイアログ付き |
| セクション間隔 | `gap-8`（32px） |

---

## 4. アニメーション & マイクロインタラクション

すべてのアニメーションは **Framer Motion** (`framer-motion`) を使用して実装する。

### 4.1 ページ遷移

| 項目 | 仕様 |
|-----|------|
| トランジション | フェード + Y 軸スライド |
| 初期状態 | `opacity: 0, y: 8` |
| 表示状態 | `opacity: 1, y: 0` |
| 所要時間 | 0.25 秒 |
| イージング | `ease-out` |

```tsx
// Framer Motion ページ遷移の基本設定
const pageVariants = {
  initial: { opacity: 0, y: 8 },
  animate: { opacity: 1, y: 0 },
  exit: { opacity: 0, y: -8 },
};
const pageTransition = { duration: 0.25, ease: "easeOut" };
```

### 4.2 モーダル

| 項目 | 仕様 |
|-----|------|
| オーバーレイ | `bg-black/50` フェードイン (0.2 秒) |
| モーダル本体 | 下からスライドアップ `y: "100%" → 0` |
| 所要時間 | 0.3 秒 |
| イージング | `[0.32, 0.72, 0, 1]`（カスタムイージング、iOS 風） |
| 閉じる | 逆方向にスライドダウン + オーバーレイフェードアウト |
| ジェスチャー | 下方向ドラッグで閉じる（`dragConstraints`） |

### 4.3 カレンダー月切替

| 項目 | 仕様 |
|-----|------|
| トランジション | 左右スライド（方向は切替方向に連動） |
| 翌月 | `x: 300 → 0`（右からスライドイン） |
| 前月 | `x: -300 → 0`（左からスライドイン） |
| 所要時間 | 0.3 秒 |
| イージング | `easeInOut` |
| 実装 | `AnimatePresence` + `mode="wait"` |

### 4.4 ゲーミフィケーション演出

#### バッジ獲得

| 項目 | 仕様 |
|-----|------|
| ステップ 1 | 画面中央にオーバーレイ表示 |
| ステップ 2 | バッジアイコンが `scale: 0 → 1.2 → 1` + `rotate: 0 → 360deg` |
| ステップ 3 | パーティクルエフェクト（小さな色付きドットが放射状に飛散） |
| ステップ 4 | バッジ名と説明テキストがフェードイン |
| 所要時間 | 全体 1.5 秒 |
| 閉じる | タップまたは 3 秒後に自動閉じ |

#### ゴール達成

| 項目 | 仕様 |
|-----|------|
| 演出 | Confetti アニメーション（上から紙吹雪が降る） |
| 所要時間 | 2 秒 |
| ライブラリ | Framer Motion でカスタム実装、または `canvas-confetti` |

#### ToDo 完了

| 項目 | 仕様 |
|-----|------|
| チェックマーク | SVG パスアニメーション（描画: 0.3 秒） |
| テキスト | 打消し線が左から右へアニメーション（0.2 秒） |
| カード | `opacity: 1 → 0.5` (0.3 秒) |

#### スタンプ送信

| 項目 | 仕様 |
|-----|------|
| 送信時 | スタンプアイコンが `scale: 0 → 1.3 → 1`（バウンス） |
| 所要時間 | 0.4 秒 |
| イージング | `[0.175, 0.885, 0.32, 1.275]`（バウンスイージング） |

### 4.5 アクセシビリティ — モーション設定

```css
@media (prefers-reduced-motion: reduce) {
  /* すべてのアニメーションを無効化 */
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
```

Framer Motion 側でも `useReducedMotion()` フックを使用し、`prefers-reduced-motion: reduce` 設定時はアニメーションをスキップまたは即時完了に切り替える。

---

## 5. ダークモード戦略

### 5.1 実装方式

| 項目 | 仕様 |
|-----|------|
| Tailwind 設定 | `darkMode: 'class'` |
| 状態管理 | Zustand ストア（`useThemeStore`） |
| 切替方法 | 設定画面のトグルスイッチ |
| 初期値 | `prefers-color-scheme: dark` を検出して自動設定 |
| 永続化 | `localStorage` に保存 |
| `<html>` への適用 | `class="dark"` を `<html>` 要素に付与 |

### 5.2 カラー変換ルール

| 要素 | ライトモード | ダークモード |
|-----|------------|------------|
| ページ背景 | Slate-50 | Slate-900 |
| カード背景 | White | Slate-800 |
| 浮き上がった要素 | White + shadow-md | Slate-700 + border |
| テキスト（主） | Slate-900 | Slate-100 |
| テキスト（副） | Slate-500 | Slate-400 |
| ボーダー | Slate-200 | Slate-700 |
| **メンバーカラー（アクセント）** | **500** | **400** |
| **メンバーカラー（背景）** | **50** | **500 / 10% 透過** |
| シャドウ | `shadow-md` | `shadow-none` + `border` |
| ブランドカラー | Indigo-500 | Indigo-400 |

### 5.3 Tailwind での記述パターン

```tsx
// カードコンポーネントの例
<div className="bg-white dark:bg-slate-800 shadow-md dark:shadow-none dark:border dark:border-slate-700 rounded-lg p-4">
  <h3 className="text-slate-900 dark:text-slate-100 text-lg font-medium">
    {title}
  </h3>
  <p className="text-slate-500 dark:text-slate-400 text-sm mt-1">
    {description}
  </p>
</div>

// メンバーカラー背景の例
<div className="bg-blue-50 dark:bg-blue-500/10 border-l-4 border-blue-500 dark:border-blue-400">
  {/* パパのイベント */}
</div>
```

---

## 6. アクセシビリティ

### 6.1 準拠基準

**WCAG 2.1 Level AA** に準拠する。（NFR-006 対応）

### 6.2 タッチターゲット

| 項目 | 仕様 |
|-----|------|
| 最小サイズ | **44 x 44 px**（WCAG 2.5.5 準拠） |
| 適用対象 | ボタン、リンク、チェックボックス、タブ、スタンプ、フィルタ、すべてのタップ可能要素 |
| 実装方法 | `min-h-[44px] min-w-[44px]` または `p-*` でタップ領域を拡張 |

### 6.3 カラーコントラスト

| テキストタイプ | 最小コントラスト比 | 対応方法 |
|-------------|:---:|---------|
| 通常テキスト (< 18px) | 4.5:1 | Slate-900 on White = 15.4:1 (OK) |
| 大テキスト (>= 18px bold) | 3:1 | — |
| メンバーカラーテキスト | 4.5:1 | **600 / 700 を使用**（500 は背景のみ） |

**メンバーカラーのコントラスト検証:**

| メンバー | 色 (600) | on White コントラスト比 | 判定 |
|---------|---------|:---:|:---:|
| パパ | Blue-600 `#2563EB` | 4.68:1 | OK |
| ママ | Pink-600 `#DB2777` | 4.54:1 | OK |
| 娘 | Yellow-700 `#A16207` | 4.84:1 | OK（Yellow は 600 だと不足のため **700 を使用**） |
| 息子 | Green-600 `#16A34A` | 4.52:1 | OK |

> **注意:** Yellow（娘）のテキスト色は **700 (`#A16207`)** を使用する。Yellow-600 (`#CA8A04`) は白背景上で 3.57:1 であり、4.5:1 を満たさないため。

### 6.4 セマンティック HTML

| 要素 | HTML タグ | ARIA 属性 |
|-----|---------|---------|
| ナビゲーション | `<nav>` | `aria-label="メインナビゲーション"` |
| メインコンテンツ | `<main>` | — |
| ボタン | `<button>` | アイコンのみの場合 `aria-label` 必須 |
| リンク | `<a>` | 外部リンクは `target="_blank" rel="noopener noreferrer"` |
| フォーム | `<form>` + `<label>` | `<label htmlFor>` で入力要素と紐づけ |
| モーダル | `<dialog>` or `role="dialog"` | `aria-modal="true"`, `aria-labelledby` |
| タブ | `role="tablist"` + `role="tab"` | `aria-selected`, `aria-controls` |
| アラート | `role="alert"` | トースト通知に使用 |
| ライブリージョン | `aria-live="polite"` | 動的に更新されるカウンター等 |

### 6.5 フォーカス管理

| 項目 | 仕様 |
|-----|------|
| フォーカスリング | `focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2` |
| フォーカス表示条件 | `:focus-visible` のみ（マウスクリックでは表示しない） |
| モーダルのフォーカストラップ | モーダル内でフォーカスを循環させる |
| モーダルを閉じた後 | トリガー要素にフォーカスを戻す |
| スキップリンク | `<a href="#main-content" className="sr-only focus:not-sr-only">メインコンテンツへスキップ</a>` |

### 6.6 カラーに依存しない情報伝達

NFR-006 の「カラーだけに依存しない情報伝達」への対応:

| 場面 | カラー | 補助的な伝達手段 |
|-----|-------|---------------|
| メンバー識別 | メンバーカラー | 表示名 + イニシャルアバター |
| イベントカテゴリ | カテゴリカラー | テキストラベル |
| 通知の種別 | 色分け | アイコン（Calendar / CheckSquare / Heart） |
| エラー状態 | 赤色 | エラーアイコン + テキストメッセージ |
| ToDo 完了 | 色変化 | チェックマーク + 打消し線 |

---

## 7. モバイル / PWA 考慮

### 7.1 Safe Area

| 項目 | 仕様 |
|-----|------|
| Viewport | `<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">` |
| 上部 | `padding-top: env(safe-area-inset-top)` — ステータスバー領域 |
| 下部 | `padding-bottom: env(safe-area-inset-bottom)` — ボトムタブバーに適用 |
| 左右 | `padding-left: env(safe-area-inset-left)`, `padding-right: env(safe-area-inset-right)` |

### 7.2 Pull-to-Refresh

| 対象画面 | トリガー | 動作 |
|---------|---------|------|
| メインボード（カレンダー） | 上端で下方向プル | カレンダーデータ再取得 |
| 通知センター | 上端で下方向プル | 通知一覧再取得 |
| ToDo リスト | 上端で下方向プル | ToDo データ再取得 |
| アルバム | 上端で下方向プル | アルバムデータ再取得 |

| 項目 | 仕様 |
|-----|------|
| インジケータ | ローディングスピナー（`animate-spin`） |
| 閾値 | 60px 下方向プルで発動 |
| 実装 | ネイティブの `overscroll-behavior` またはカスタム実装 |

### 7.3 ジェスチャー

| ジェスチャー | 対象 | 動作 |
|------------|------|------|
| 左右スワイプ | カレンダー月間ビュー | 前月/翌月切替 |
| 左右スワイプ | カレンダー週間ビュー | 前週/翌週切替 |
| 左右スワイプ | 日別ビュー | 前日/翌日切替 |
| ピンチイン/アウト | 写真全画面表示 | ズームイン/アウト |
| ロングプレス | イベントカード | コンテキストメニュー（編集/削除） |
| ロングプレス | ToDo カード | コンテキストメニュー（編集/削除/完了） |
| 下方向ドラッグ | モーダル | モーダルを閉じる |

### 7.4 オフライン対応

| 項目 | 仕様 |
|-----|------|
| Service Worker | `next-pwa` で生成 |
| キャッシュ戦略 | Network First（API）/ Cache First（静的アセット） |
| オフライン時の表示 | キャッシュ済みデータを表示 |
| オフラインバナー | 画面上部に `bg-amber-500 text-white text-sm py-2 text-center`「オフラインです。一部の情報が最新でない場合があります。」 |
| データ同期 | オンライン復帰時、未送信の操作はキューに入れず破棄（シンプルさ優先） |

### 7.5 PWA マニフェスト

```json
{
  "name": "コネクト・ファミリー・ハブ",
  "short_name": "Fam-Link",
  "description": "家族の予定をひとつに",
  "start_url": "/",
  "display": "standalone",
  "orientation": "portrait",
  "theme_color": "#6366F1",
  "background_color": "#F8FAFC",
  "icons": [
    {
      "src": "/icons/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icons/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    },
    {
      "src": "/icons/icon-maskable-512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "maskable"
    }
  ]
}
```

---

## 8. Tailwind カスタム設定 & コンポーネント構成案

### 8.1 `tailwind.config.ts` カスタムカラー定義

```ts
import type { Config } from "tailwindcss";

const config: Config = {
  darkMode: "class",
  content: [
    "./src/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      colors: {
        // ブランドカラー
        brand: {
          50: "#EEF2FF",
          100: "#E0E7FF",
          200: "#C7D2FE",
          400: "#818CF8",
          500: "#6366F1",
          600: "#4F46E5",
          700: "#4338CA",
        },
        // メンバーカラー
        papa: {
          50: "#EFF6FF",
          100: "#DBEAFE",
          200: "#BFDBFE",
          400: "#60A5FA",
          500: "#3B82F6",
          600: "#2563EB",
          700: "#1D4ED8",
        },
        mama: {
          50: "#FDF2F8",
          100: "#FCE7F3",
          200: "#FBCFE8",
          400: "#F472B6",
          500: "#EC4899",
          600: "#DB2777",
          700: "#BE185D",
        },
        daughter: {
          50: "#FEFCE8",
          100: "#FEF9C3",
          200: "#FEF08A",
          400: "#FACC15",
          500: "#EAB308",
          600: "#CA8A04",
          700: "#A16207",
        },
        son: {
          50: "#F0FDF4",
          100: "#DCFCE7",
          200: "#BBF7D0",
          400: "#4ADE80",
          500: "#22C55E",
          600: "#16A34A",
          700: "#15803D",
        },
      },
      fontFamily: {
        sans: ["var(--font-noto-sans-jp)", "sans-serif"],
        mono: ["var(--font-inter)", "monospace"],
      },
      // NOTE: Inter はフォント変数名を --font-inter として定義し、
      // 数値表示に class="font-mono" で適用する
    },
  },
  plugins: [],
};

export default config;
```

### 8.2 フォント読み込み（`app/layout.tsx` での設定例）

```tsx
import { Noto_Sans_JP } from "next/font/google";
import { Inter } from "next/font/google";

const notoSansJP = Noto_Sans_JP({
  subsets: ["latin"],
  weight: ["400", "500", "700"],
  variable: "--font-noto-sans-jp",
  display: "swap",
});

const inter = Inter({
  subsets: ["latin"],
  weight: ["400", "500", "600"],
  variable: "--font-inter",
  display: "swap",
});

// <html> に適用
// <html className={`${notoSansJP.variable} ${inter.variable}`}>
```

### 8.3 コンポーネントディレクトリ構成

```
src/
└── components/
    ├── ui/                    # 汎用UIコンポーネント
    │   ├── Button.tsx
    │   ├── Card.tsx
    │   ├── Input.tsx
    │   ├── Select.tsx
    │   ├── Toggle.tsx
    │   ├── Badge.tsx
    │   ├── Toast.tsx
    │   ├── Skeleton.tsx
    │   ├── EmptyState.tsx
    │   ├── Modal.tsx
    │   └── ProgressBar.tsx
    │
    ├── layout/                # レイアウトコンポーネント
    │   ├── BottomTabBar.tsx
    │   ├── Sidebar.tsx
    │   ├── Header.tsx
    │   ├── PageContainer.tsx
    │   └── OfflineBanner.tsx
    │
    ├── calendar/              # カレンダー関連
    │   ├── MonthView.tsx
    │   ├── WeekView.tsx
    │   ├── DayView.tsx
    │   ├── CalendarHeader.tsx
    │   ├── WeekRow.tsx          # ウィークロー（日付行 + イベントトラック行）
    │   ├── EventPill.tsx        # イベントピル（バー）— 複数日スパン対応
    │   ├── DayDetailModal.tsx   # 日付タップ時のボトムシートモーダル
    │   ├── TimelineGrid.tsx
    │   └── CurrentTimeLine.tsx
    │
    ├── member/                # メンバー関連
    │   ├── Avatar.tsx
    │   ├── MemberFilter.tsx
    │   └── MemberSelector.tsx
    │
    ├── todo/                  # ToDo関連
    │   ├── TodoCard.tsx
    │   ├── TodoList.tsx
    │   └── TodoForm.tsx
    │
    ├── chat/                  # チャット関連
    │   ├── ChatThread.tsx
    │   ├── ChatMessage.tsx
    │   └── ChatInput.tsx
    │
    ├── stamp/                 # スタンプ関連
    │   ├── StampBar.tsx
    │   ├── StampButton.tsx
    │   └── StampDisplay.tsx
    │
    ├── gamification/          # ゲーミフィケーション関連
    │   ├── GoalCard.tsx
    │   ├── BadgeGrid.tsx
    │   ├── BadgeItem.tsx
    │   ├── BadgeEarnedModal.tsx
    │   └── ConfettiEffect.tsx
    │
    └── scan/                  # AIスキャン関連
        ├── CameraCapture.tsx
        ├── ScanLoading.tsx
        ├── ScanResultCard.tsx
        └── ScanResultForm.tsx
```

---

## 9. 要件トレーサビリティ

本デザイン要件定義書と `requirements.md` の要件 ID との対応を以下に示す。

### 機能要件との対応

| 要件 ID | 要件名 | 本書の対応セクション |
|:---:|---------|------------|
| AUTH-001 | Google ログイン | [画面 1: ログイン](#画面-1-ログイン-login--p1) |
| AUTH-002 | 家族グループ作成 | [画面 2: 初期セットアップ](#画面-2-初期セットアップ-setup--p1) |
| AUTH-003 | 家族メンバー招待 | [画面 2: 初期セットアップ](#画面-2-初期セットアップ-setup--p1) |
| AUTH-004 | プロフィール編集 | [画面 13: 設定](#画面-13-設定-settings--p1) |
| AUTH-005 | ログアウト | [画面 13: 設定](#画面-13-設定-settings--p1) |
| CAL-001 | 予定の作成 | [画面 6: 予定作成/編集](#画面-6-予定作成--編集-eventsnew-eventsidedit--p1) |
| CAL-002 | 予定の編集 | [画面 6: 予定作成/編集](#画面-6-予定作成--編集-eventsnew-eventsidedit--p1) |
| CAL-003 | 予定の削除 | [画面 6: 予定作成/編集](#画面-6-予定作成--編集-eventsnew-eventsidedit--p1) |
| CAL-004 | 月間ビュー | [2.5 カレンダー](#25-カレンダー), [画面 3: メインボード](#画面-3-メインボード---p1) |
| CAL-005 | 週間ビュー | [2.5 カレンダー](#25-カレンダー), [画面 4: 週間ビュー](#画面-4-週間ビュー-week--p1) |
| CAL-006 | 日別ビュー | [2.5 カレンダー](#25-カレンダー), [画面 5: 日別ビュー](#画面-5-日別ビュー-daydate--p1) |
| CAL-007 | メンバーフィルタ | [2.5 カレンダー](#25-カレンダー) |
| CAL-008 | 今日へ戻る | [画面 3: メインボード](#画面-3-メインボード---p1) |
| PUSH-004 | 通知センター画面 | [画面 8: 通知センター](#画面-8-通知センター-notifications--p1) |
| CHAT-001 | チャットスレッド表示 | [画面 7: イベント詳細+チャット](#画面-7-イベント詳細--チャット-eventsid--p1基本--p2チャット) |
| CHAT-002 | メッセージ送信 | [画面 7: イベント詳細+チャット](#画面-7-イベント詳細--チャット-eventsid--p1基本--p2チャット) |
| CHAT-003 | 画像送信 | [画面 7: イベント詳細+チャット](#画面-7-イベント詳細--チャット-eventsid--p1基本--p2チャット) |
| TODO-001〜004 | 共有 ToDo リスト | [画面 10: 学校/ToDoハブ](#画面-10-学校--todo-ハブ-hub--p2) |
| STAMP-001 | スタンプ送信 | [2.7 バッジ & スタンプ](#27-バッジ--スタンプ), [画面 7](#画面-7-イベント詳細--チャット-eventsid--p1基本--p2チャット) |
| STAMP-002 | スタンプ表示 | [2.7 バッジ & スタンプ](#27-バッジ--スタンプ), [画面 7](#画面-7-イベント詳細--チャット-eventsid--p1基本--p2チャット) |
| SCAN-001〜004 | AI プリントスキャン | [画面 9: AIスキャナー](#画面-9-ai-スキャナー-scan--p2) |
| ARCHIVE-001〜003 | 学校書類アーカイブ | [画面 10: 学校/ToDoハブ](#画面-10-学校--todo-ハブ-hub--p2) |
| SCHOOL-001〜003 | 学校スケジュールハブ | [画面 10: 学校/ToDoハブ](#画面-10-学校--todo-ハブ-hub--p2) |
| GAME-001〜003 | ゲーミフィケーション | [画面 11: ゴール/リワード](#画面-11-ゴール--リワード-goals--p3) |
| ALBUM-001〜003 | ストーリー・アルバム | [画面 12: アルバム](#画面-12-アルバム-album--p3) |

### 非機能要件との対応

| 要件 ID | 要件名 | 本書の対応セクション |
|:---:|---------|------------|
| NFR-001 | 対応ブラウザ・デバイス | [1.3 スペーシング & グリッド](#13-スペーシング--グリッド), [7. モバイル/PWA](#7-モバイル--pwa-考慮) |
| NFR-002 | PWA 対応 | [7.5 PWAマニフェスト](#75-pwa-マニフェスト) |
| NFR-006 | アクセシビリティ | [6. アクセシビリティ](#6-アクセシビリティ) 全体 |

### 検証チェックリスト

- [x] **カラーコントラスト:** メンバーカラーテキスト (600/700) が白背景上で 4.5:1 以上 → [6.3 で検証済み](#63-カラーコントラスト)
- [x] **フォントサイズ:** 最小 14px（`text-sm`）→ [1.2 で定義済み](#12-タイポグラフィ)
- [x] **タッチターゲット:** 全インタラクティブ要素が 44x44px 以上 → [6.2 で定義済み](#62-タッチターゲット)
- [x] **要件 ID 対応:** 全画面が requirements.md の要件 ID と紐づけ済み → [本セクション](#機能要件との対応)
